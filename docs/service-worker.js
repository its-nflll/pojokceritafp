importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.5.4/workbox-sw.js");const CACHE_VERSION="v3";self.addEventListener("push",(function(t){let e={title:"PojokCerita",options:{body:"Ada notifikasi baru!",icon:"/images/logo.png",badge:"/favicon.png",data:{}}};if(t.data)try{const o=t.data.json();e={title:o.title||e.title,options:{...e.options,body:o.options?.body||e.options.body,data:o}}}catch(t){console.error("Error parsing push data:",t)}t.waitUntil(self.registration.showNotification(e.title,e.options))})),self.addEventListener("notificationclick",(t=>{t.notification.close();const e=new URL("/",self.location.origin).href;t.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((t=>{if(!t.some((t=>t.url===e&&(t.focus(),!0))))return clients.openWindow(e)})))})),workbox.routing.registerRoute((({request:t})=>"document"===t.destination||"script"===t.destination||"style"===t.destination),new workbox.strategies.NetworkFirst({cacheName:"assets-cache-v3"})),workbox.routing.registerRoute((({url:t})=>t.pathname.startsWith("/api/")),new workbox.strategies.NetworkFirst({cacheName:"api-cache-v3",networkTimeoutSeconds:5,plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:30,maxAgeSeconds:300})]})),workbox.routing.registerRoute((({request:t})=>"image"===t.destination),new workbox.strategies.CacheFirst({cacheName:"images-cache-v3",plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:50})]}));const defaultHandler=new workbox.strategies.NetworkFirst({cacheName:"documents-cache-v3"});workbox.routing.setDefaultHandler(defaultHandler),workbox.routing.setCatchHandler((async({event:t})=>"document"===t.request.destination?caches.match("/index.html"):Response.error()));